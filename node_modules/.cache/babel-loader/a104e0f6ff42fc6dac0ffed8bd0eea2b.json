{"remainingRequest":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\src\\store\\modules\\auth\\actions.js","dependencies":[{"path":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\src\\store\\modules\\auth\\actions.js","mtime":1655197468853},{"path":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\babel.config.js","mtime":1598433744000},{"path":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653990490219},{"path":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\node_modules\\babel-loader\\lib\\index.js","mtime":1653990506204},{"path":"C:\\Users\\CLS1MC\\source\\repos\\vue_complete\\main-prj-01-starting-setup\\node_modules\\eslint-loader\\index.js","mtime":1653990494556}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiQzovVXNlcnMvQ0xTMU1DL3NvdXJjZS9yZXBvcy92dWVfY29tcGxldGUvbWFpbi1wcmotMDEtc3RhcnRpbmctc2V0dXAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3JlZ2VuZXJhdG9yUnVudGltZS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkM6L1VzZXJzL0NMUzFNQy9zb3VyY2UvcmVwb3MvdnVlX2NvbXBsZXRlL21haW4tcHJqLTAxLXN0YXJ0aW5nLXNldHVwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL0NMUzFNQy9zb3VyY2UvcmVwb3MvdnVlX2NvbXBsZXRlL21haW4tcHJqLTAxLXN0YXJ0aW5nLXNldHVwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwp2YXIgdGltZXI7CmV4cG9ydCBkZWZhdWx0IHsKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGNvbnRleHQuZGlzcGF0Y2goJ2F1dGgnLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHBheWxvYWQpLCB7fSwgewogICAgICAgICAgICAgICAgbW9kZTogJ2xvZ2luJwogICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBzaWdudXA6IGZ1bmN0aW9uIHNpZ251cChjb250ZXh0LCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgY29udGV4dC5kaXNwYXRjaCgnYXV0aCcsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcGF5bG9hZCksIHt9LCB7CiAgICAgICAgICAgICAgICBtb2RlOiAnc2lnbnVwJwogICAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSkoKTsKICB9LAogIGF1dGg6IGZ1bmN0aW9uIGF1dGgoY29udGV4dCwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBtb2RlLCB1cmwsIHJlc3BvbnNlLCByZXNwb25zZURhdGEsIGVycm9yLCBleHBpcmVzSW4sIGV4cGlyYXRpb25EYXRlOwogICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZSgpLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIG1vZGUgPSBwYXlsb2FkLm1vZGU7CiAgICAgICAgICAgICAgdXJsID0gJ2h0dHBzOi8vaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9QUl6YVN5QmpZRElWRWxVR09jVms5UV9hV0U0OFg4c1dCbUFVVWpjJzsKCiAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICdzaWdudXAnKSB7CiAgICAgICAgICAgICAgICB1cmwgPSAnaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vdjEvYWNjb3VudHM6c2lnblVwP2tleT1BSXphU3lCallESVZFbFVHT2NWazlRX2FXRTQ4WDhzV0JtQVVVamMnOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBheWxvYWQucGFzc3dvcmQsCiAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgcmVzcG9uc2VEYXRhID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VEYXRhKTsKICAgICAgICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZURhdGEubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGF1dGhlbnRpY2F0ZS4gQ2hlY2sgeW91ciBsb2dpbiBkYXRhIScpOwogICAgICAgICAgICAgIHRocm93IGVycm9yOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBleHBpcmVzSW4gPSByZXNwb25zZURhdGEuZXhwaXJlc0luICogMTAwMDsKICAgICAgICAgICAgICBleHBpcmF0aW9uRGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgZXhwaXJlc0luOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3BvbnNlRGF0YS5pZFRva2VuKTsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgcmVzcG9uc2VEYXRhLmxvY2FsSWQpOwogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nLCBleHBpcmF0aW9uRGF0ZSk7CiAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2goJ2xvZ291dCcpOwogICAgICAgICAgICAgIH0sIGV4cGlyZXNJbik7CiAgICAgICAgICAgICAgY29udGV4dC5jb21taXQoJ3NldFVzZXInLCB7CiAgICAgICAgICAgICAgICB0b2tlbjogcmVzcG9uc2VEYXRhLmlkVG9rZW4sCiAgICAgICAgICAgICAgICB1c2VySWQ6IHJlc3BvbnNlRGF0YS5sb2NhbElkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKCk7CiAgfSwKICB0cnlMb2dpbjogZnVuY3Rpb24gdHJ5TG9naW4oY29udGV4dCkgewogICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICB2YXIgdXNlcklkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXJJZCcpOwogICAgdmFyIHRva2VuRXhwaXJhdGlvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsKICAgIHZhciBleHBpcmVzSW4gPSArdG9rZW5FeHBpcmF0aW9uIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CgogICAgaWYgKHRva2VuICYmIHVzZXJJZCkgewogICAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgICB0b2tlbjogdG9rZW4sCiAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgfSk7CiAgICB9CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChjb250ZXh0KSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySWQnKTsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbkV4cGlyYXRpb24nKTsKICAgIGNsZWFyVGltZW91dCh0aW1lcik7CiAgICBjb250ZXh0LmNvbW1pdCgnc2V0VXNlcicsIHsKICAgICAgdG9rZW46IG51bGwsCiAgICAgIHVzZXJJZDogbnVsbAogICAgfSk7CiAgfQp9Ow=="},{"version":3,"names":["timer","login","context","payload","dispatch","mode","signup","auth","url","fetch","method","body","JSON","stringify","email","password","returnSecureToken","response","json","responseData","ok","console","log","error","Error","message","expiresIn","expirationDate","Date","getTime","localStorage","setItem","idToken","localId","setTimeout","commit","token","userId","tryLogin","getItem","tokenExpiration","logout","removeItem","clearTimeout"],"sources":["C:/Users/CLS1MC/source/repos/vue_complete/main-prj-01-starting-setup/src/store/modules/auth/actions.js"],"sourcesContent":["let timer;\r\n\r\nexport default {\r\n    async login(context, payload) {\r\n        return context.dispatch('auth', {\r\n            ...payload,\r\n            mode: 'login'\r\n        })\r\n    },\r\n    async signup(context, payload) {\r\n        return context.dispatch('auth', {\r\n            ...payload,\r\n            mode: 'signup'\r\n        })\r\n    },\r\n    async auth(context, payload) {\r\n        const mode = payload.mode;\r\n        let url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBjYDIVElUGOcVk9Q_aWE48X8sWBmAUUjc';\r\n\r\n        if (mode === 'signup') {\r\n            url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBjYDIVElUGOcVk9Q_aWE48X8sWBmAUUjc';\r\n        }\r\n        const response = await fetch(url, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                email: payload.email,\r\n                password: payload.password,\r\n                returnSecureToken: true\r\n            })\r\n        });\r\n\r\n        const responseData = await response.json();\r\n\r\n        if (!response.ok) {\r\n            console.log(responseData);\r\n            const error = new Error(responseData.message || 'Failed to authenticate. Check your login data!');\r\n            throw error;\r\n        }\r\n\r\n        const expiresIn = responseData.expiresIn * 1000;\r\n        const expirationDate = new Date().getTime() + expiresIn;\r\n\r\n        localStorage.setItem('token', responseData.idToken);\r\n        localStorage.setItem('userId', responseData.localId);\r\n        localStorage.setItem('tokenExpiration', expirationDate);\r\n\r\n        timer = setTimeout(function () {\r\n            context.dispatch('logout');\r\n        }, expiresIn)\r\n\r\n        context.commit('setUser', {\r\n            token: responseData.idToken,\r\n            userId: responseData.localId\r\n        });\r\n    },\r\n    tryLogin(context) {\r\n        const token = localStorage.getItem('token');\r\n        const userId = localStorage.getItem('userId');\r\n        const tokenExpiration = localStorage.getItem('tokenExpiration');\r\n\r\n        const expiresIn = +tokenExpiration - new Date().getTime();\r\n\r\n        if (token && userId) {\r\n            context.commit('setUser', {\r\n                token: token,\r\n                userId: userId\r\n            })\r\n        }\r\n    },\r\n    logout(context) {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('userId');\r\n        localStorage.removeItem('tokenExpiration');\r\n\r\n        clearTimeout(timer);\r\n\r\n        context.commit('setUser', {\r\n            token: null,\r\n            userId: null\r\n        })\r\n    }\r\n};"],"mappings":"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"}]}